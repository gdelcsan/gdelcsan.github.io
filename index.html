import React from "react";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { Tabs, TabsList, TabsTrigger, TabsContent } from "@/components/ui/tabs";
import { Input } from "@/components/ui/input";
import { Progress } from "@/components/ui/progress";
import { Mail, Github, Linkedin, Globe, ExternalLink, Brain, TerminalSquare, Smartphone, Layout, Rocket, Sparkles, Code2, GraduationCap, Cpu, Database, Boxes, Youtube, Moon, SunMedium } from "lucide-react";
import { motion } from "framer-motion";

// --- Quick Start ------------------------------------------------------------
// 1) Drop this file into a Vite/Next/CRA project using Tailwind + shadcn/ui.
// 2) Update the `profile`, `projects`, and `aiDemos` data below.
// 3) Deploy to GitHub Pages (Vite/CRA) or Vercel/Netlify (Next/Vite).
// 4) Optional: Replace imports with your preferred UI library if not using shadcn.

// --- Content ----------------------------------------------------------------
const profile = {
  name: "Your Name",
  title: "Web/App Developer · AI/ML Enthusiast",
  tagline:
    "I build fast, accessible web & mobile experiences and ship AI features powered by LLMs and vector search.",
  location: "Miami, FL",
  email: "your.email@example.com",
  github: "https://github.com/your-username",
  linkedin: "https://www.linkedin.com/in/your-handle/",
  website: "https://your-domain.com",
};

const skills = {
  web: ["TypeScript", "React", "Next.js", "Node.js", "Express", "Vite", "Tailwind CSS", "tRPC", "GraphQL"],
  mobile: ["React Native", "Expo", "Flutter (basic)", "iOS/Android tooling"],
  ai: ["Python", "PyTorch", "Transformers", "LangChain", "OpenAI API", "RAG", "Vector DBs (Pinecone/FAISS)", "LLM Ops"],
  cloud: ["Docker", "PostgreSQL", "Prisma", "Supabase", "Firebase", "AWS", "Vercel", "CI/CD"],
};

const projects = [
  {
    title: "DevBoard — Developer Dashboard",
    description:
      "Personal dashboard with GitHub activity, issue triage, and CI status. Built with Next.js App Router, Server Actions, and edge caching.",
    stack: ["Next.js", "TypeScript", "Tailwind", "GitHub API"],
    links: {
      repo: "https://github.com/your-username/devboard",
      demo: "https://devboard.your-domain.com",
    },
    category: "web",
    highlight: true,
  },
  {
    title: "PocketChef — iOS/Android App",
    description:
      "Cross-platform app that recommends recipes from pantry photos. Uses on-device model for ingredient detection and a small LLM for steps.",
    stack: ["React Native", "Expo", "TensorFlow Lite", "SQLite"],
    links: {
      repo: "https://github.com/your-username/pocketchef",
      demo: "https://youtu.be/demo",
    },
    category: "mobile",
    highlight: true,
  },
  {
    title: "DocsGen AI — LLM Technical Writer",
    description:
      "RAG pipeline that turns codebases into contextual docs with source-citation, chunking, and feedback loops.",
    stack: ["Python", "FastAPI", "LangChain", "OpenAI", "Pinecone", "Docker"],
    links: {
      repo: "https://github.com/your-username/docsgen-ai",
      demo: "https://docsgen.your-domain.com",
    },
    category: "ai",
    highlight: true,
  },
  {
    title: "Realtime Collab Whiteboard",
    description:
      "WebRTC + CRDT whiteboard with infinite canvas, multi-cursor presence, and offline sync.",
    stack: ["React", "Yjs", "WebRTC", "tRPC", "Postgres"],
    links: {
      repo: "https://github.com/your-username/whiteboard",
      demo: "https://whiteboard.your-domain.com",
    },
    category: "web",
  },
  {
    title: "TripTailor — AI Trip Planner",
    description:
      "Planner that blends live data with LLM itineraries; uses tool-calling to fetch flights, weather, and POIs.",
    stack: ["Next.js", "OpenAI", "Server Actions", "Redis"] ,
    links: {
      repo: "https://github.com/your-username/triptailor",
      demo: "https://triptailor.your-domain.com",
    },
    category: "ai",
  },
];

const aiDemos = [
  {
    name: "Code Explainer (RAG)",
    description: "Ask questions about a repo; gets semantically relevant chunks with citations.",
    tech: ["LangChain", "FAISS", "OpenAI GPT-4o"],
  },
  {
    name: "Vision Captioner",
    description: "Generates captions from images; supports mobile uploads.",
    tech: ["Vision model", "React Native", "Serverless"],
  },
  {
    name: "Chat with PDF",
    description: "Citations, tables-to-markdown, and chunk feedback to boost retrieval quality.",
    tech: ["Embeddings", "Pinecone", "FastAPI"],
  },
];

const education = [
  {
    school: "Florida Atlantic University",
    program: "B.S. in Accounting (Junior)",
    period: "2025 – 2027",
  },
  {
    school: "Florida International University",
    program: "Economics (transfer)",
    period: "2023 – 2025",
  },
];

const experience = [
  {
    company: "Example Corp",
    role: "Software Engineer Intern",
    period: "Summer 2025",
    bullets: [
      "Built internal dashboard with Next.js and Charting; reduced triage time by 30%.",
      "Shipped feature flags and A/B experiments using LaunchDarkly + PostHog.",
    ],
  },
  {
    company: "US Marine Corps",
    role: "Aviation Supply · Logistics",
    period: "2019 – 2023",
    bullets: [
      "Led cross-rank communication and conflict resolution to keep ops on track.",
      "Coordinated multi-site logistics, improving readiness and turnaround times.",
    ],
  },
];

// --- UI Helpers -------------------------------------------------------------
const Section = ({ id, icon: Icon, title, description, children }) => (
  <section id={id} className="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <motion.div
      initial={{ opacity: 0, y: 10 }}
      whileInView={{ opacity: 1, y: 0 }}
      viewport={{ once: true }}
      transition={{ duration: 0.4 }}
      className="mb-8"
    >
      <div className="flex items-center gap-3">
        <Icon className="h-6 w-6" />
        <h2 className="text-2xl sm:text-3xl font-semibold tracking-tight">{title}</h2>
      </div>
      {description && (
        <p className="mt-2 text-muted-foreground max-w-3xl">{description}</p>
      )}
    </motion.div>
    {children}
  </section>
);

const Pill = ({ children }) => (
  <span className="px-3 py-1 rounded-full border text-sm">{children}</span>
);

const LinkIcon = ({ href, label, icon: Icon }) => (
  <a href={href} target="_blank" rel="noreferrer" className="inline-flex items-center gap-2 hover:underline">
    <Icon className="h-4 w-4" />
    <span>{label}</span>
    <ExternalLink className="h-3.5 w-3.5" />
  </a>
);

// --- Dark Mode Toggle -------------------------------------------------------
function ThemeToggle() {
  const [dark, setDark] = React.useState(true);
  React.useEffect(() => {
    const root = window.document.documentElement;
    if (dark) root.classList.add("dark");
    else root.classList.remove("dark");
  }, [dark]);
  return (
    <Button variant="outline" size="icon" onClick={() => setDark((d) => !d)} aria-label="Toggle theme">
      {dark ? <SunMedium className="h-5 w-5" /> : <Moon className="h-5 w-5" />}
    </Button>
  );
}

// --- Main Component ---------------------------------------------------------
export default function Portfolio() {
  return (
    <div className="min-h-screen bg-background text-foreground">
      {/* Navbar */}
      <header className="sticky top-0 z-40 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b">
        <div className="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 h-14 flex items-center justify-between">
          <div className="flex items-center gap-3">
            <Rocket className="h-5 w-5" />
            <span className="font-semibold">{profile.name}</span>
            <span className="hidden sm:inline text-muted-foreground">· {profile.title}</span>
          </div>
          <nav className="hidden md:flex items-center gap-6 text-sm">
            <a href="#projects" className="hover:underline">Projects</a>
            <a href="#ai" className="hover:underline">AI</a>
            <a href="#skills" className="hover:underline">Skills</a>
            <a href="#experience" className="hover:underline">Experience</a>
            <a href="#contact" className="hover:underline">Contact</a>
          </nav>
          <div className="flex items-center gap-2">
            <ThemeToggle />
            <Button asChild>
              <a href={profile.github} target="_blank" rel="noreferrer" className="flex items-center gap-2">
                <Github className="h-4 w-4" /> Star on GitHub
              </a>
            </Button>
          </div>
        </div>
      </header>

      {/* Hero */}
      <section className="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
        <div className="grid lg:grid-cols-2 gap-8 items-center">
          <motion.div initial={{ opacity: 0, y: 12 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 0.4 }}>
            <h1 className="text-3xl sm:text-5xl font-bold leading-tight">
              {profile.name}
            </h1>
            <p className="mt-3 text-xl text-muted-foreground">{profile.title}</p>
            <p className="mt-4 max-w-2xl text-base sm:text-lg">
              {profile.tagline}
            </p>
            <div className="mt-6 flex flex-wrap items-center gap-3">
              <Button asChild size="lg">
                <a href="#projects"><Layout className="h-5 w-5 mr-2" /> View Projects</a>
              </Button>
              <Button asChild variant="secondary" size="lg">
                <a href="#ai"><Brain className="h-5 w-5 mr-2" /> AI Work</a>
              </Button>
              <div className="flex items-center gap-3 text-sm text-muted-foreground">
                <a href={profile.website} className="inline-flex items-center gap-1 hover:underline" target="_blank" rel="noreferrer"><Globe className="h-4 w-4" /> Website</a>
                <a href={profile.linkedin} className="inline-flex items-center gap-1 hover:underline" target="_blank" rel="noreferrer"><Linkedin className="h-4 w-4" /> LinkedIn</a>
              </div>
            </div>
          </motion.div>
          <motion.div initial={{ opacity: 0, y: 12 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 0.4 }}>
            <Card className="shadow-sm">
              <CardHeader>
                <CardTitle className="flex items-center gap-2"><Sparkles className="h-5 w-5" /> Featured Tech</CardTitle>
                <CardDescription>Stacks I use to ship reliably.</CardDescription>
              </CardHeader>
              <CardContent className="grid grid-cols-2 sm:grid-cols-3 gap-2">
                {["TypeScript", "React", "Next.js", "Node.js", "Python", "LangChain", "OpenAI", "Docker", "Postgres"].map((t) => (
                  <Badge key={t} variant="secondary" className="justify-center py-1">{t}</Badge>
                ))}
              </CardContent>
            </Card>
          </motion.div>
        </div>
      </section>

      {/* Projects */}
      <Section
        id="projects"
        icon={Layout}
        title="Projects"
        description="Selected web, mobile, and AI builds."
      >
        <Tabs defaultValue="all" className="w-full">
          <TabsList className="mb-4">
            <TabsTrigger value="all">All</TabsTrigger>
            <TabsTrigger value="web">Web</TabsTrigger>
            <TabsTrigger value="mobile">Mobile</TabsTrigger>
            <TabsTrigger value="ai">AI</TabsTrigger>
          </TabsList>
          {(["all", "web", "mobile", "ai"] as const).map((tab) => (
            <TabsContent key={tab} value={tab}>
              <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
                {projects
                  .filter((p) => tab === "all" || p.category === tab)
                  .map((p) => (
                    <Card key={p.title} className={p.highlight ? "border-primary/50" : ""}>
                      <CardHeader>
                        <CardTitle className="flex items-center justify-between gap-2">
                          <span className="text-base sm:text-lg">{p.title}</span>
                          <div className="flex gap-2">
                            {p.links.demo && (
                              <Button asChild variant="ghost" size="icon" aria-label="Demo">
                                <a href={p.links.demo} target="_blank" rel="noreferrer"><Globe className="h-4 w-4" /></a>
                              </Button>
                            )}
                            {p.links.repo && (
                              <Button asChild variant="ghost" size="icon" aria-label="Repository">
                                <a href={p.links.repo} target="_blank" rel="noreferrer"><Github className="h-4 w-4" /></a>
                              </Button>
                            )}
                          </div>
                        </CardTitle>
                        <CardDescription>{p.description}</CardDescription>
                      </CardHeader>
                      <CardContent>
                        <div className="flex flex-wrap gap-2">
                          {p.stack.map((s) => (
                            <Pill key={s}>{s}</Pill>
                          ))}
                        </div>
                      </CardContent>
                    </Card>
                  ))}
              </div>
            </TabsContent>
          ))}
        </Tabs>
      </Section>

      {/* AI Demos */}
      <Section
        id="ai"
        icon={Brain}
        title="AI Experiments & Demos"
        description="LLM features, RAG pipelines, and applied ML in products."
      >
        <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
          {aiDemos.map((d) => (
            <Card key={d.name}>
              <CardHeader>
                <CardTitle className="text-base sm:text-lg flex items-center gap-2"><Cpu className="h-5 w-5" /> {d.name}</CardTitle>
                <CardDescription>{d.description}</CardDescription>
              </CardHeader>
              <CardContent>
                <div className="flex flex-wrap gap-2">
                  {d.tech.map((t) => (
                    <Badge key={t} variant="outline">{t}</Badge>
                  ))}
                </div>
              </CardContent>
            </Card>
          ))}
        </div>
      </Section>

      {/* Skills */}
      <Section
        id="skills"
        icon={Code2}
        title="Skills"
        description="Focused on modern frontends, robust backends, and practical AI."
      >
        <div className="grid md:grid-cols-2 gap-6">
          <Card>
            <CardHeader><CardTitle>Web</CardTitle><CardDescription>Front-end frameworks & tooling</CardDescription></CardHeader>
            <CardContent className="flex flex-wrap gap-2">{skills.web.map((s) => <Pill key={s}>{s}</Pill>)}</CardContent>
          </Card>
          <Card>
            <CardHeader><CardTitle>Mobile</CardTitle><CardDescription>Cross-platform development</CardDescription></CardHeader>
            <CardContent className="flex flex-wrap gap-2">{skills.mobile.map((s) => <Pill key={s}>{s}</Pill>)}</CardContent>
          </Card>
          <Card>
            <CardHeader><CardTitle>AI / ML</CardTitle><CardDescription>LLMs, RAG, model tooling</CardDescription></CardHeader>
            <CardContent className="flex flex-wrap gap-2">{skills.ai.map((s) => <Pill key={s}>{s}</Pill>)}</CardContent>
          </Card>
          <Card>
            <CardHeader><CardTitle>Cloud & Data</CardTitle><CardDescription>Infra, databases, and ops</CardDescription></CardHeader>
            <CardContent className="flex flex-wrap gap-2">{skills.cloud.map((s) => <Pill key={s}>{s}</Pill>)}</CardContent>
          </Card>
        </div>

        <div className="mt-8 grid md:grid-cols-2 gap-6">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2"><Database className="h-5 w-5" /> Currently Learning</CardTitle>
              <CardDescription>Progress on new tools & concepts</CardDescription>
            </CardHeader>
            <CardContent className="space-y-4">
              {[{ name: "Rust", pct: 35 }, { name: "LLM Agents", pct: 60 }, { name: "Kubernetes", pct: 25 }].map((i) => (
                <div key={i.name}>
                  <div className="mb-1 flex items-center justify-between text-sm"><span>{i.name}</span><span>{i.pct}%</span></div>
                  <Progress value={i.pct} />
                </div>
              ))}
            </CardContent>
          </Card>
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2"><Boxes className="h-5 w-5" /> Tech I Enjoy</CardTitle>
              <CardDescription>Tools I reach for a lot</CardDescription>
            </CardHeader>
            <CardContent className="flex flex-wrap gap-2">
              {["Zod", "Prisma", "PostHog", "Redux Toolkit", "tRPC", "Zustand", "Drizzle", "Playwright"].map((t) => (
                <Badge key={t} variant="secondary">{t}</Badge>
              ))}
            </CardContent>
          </Card>
        </div>
      </Section>

      {/* Experience & Education */}
      <Section id="experience" icon={TerminalSquare} title="Experience & Education">
        <div className="grid md:grid-cols-2 gap-6">
          <Card>
            <CardHeader><CardTitle>Experience</CardTitle></CardHeader>
            <CardContent className="space-y-6">
              {experience.map((e) => (
                <div key={`${e.company}-${e.role}`}> 
                  <div className="flex items-center justify-between">
                    <h4 className="font-medium">{e.role} · {e.company}</h4>
                    <span className="text-sm text-muted-foreground">{e.period}</span>
                  </div>
                  <ul className="list-disc pl-5 mt-2 space-y-1 text-sm">
                    {e.bullets.map((b, i) => <li key={i}>{b}</li>)}
                  </ul>
                </div>
              ))}
            </CardContent>
          </Card>
          <Card>
            <CardHeader><CardTitle>Education</CardTitle></CardHeader>
            <CardContent className="space-y-4">
              {education.map((ed) => (
                <div key={`${ed.school}-${ed.program}`}> 
                  <div className="flex items-center justify-between">
                    <h4 className="font-medium flex items-center gap-2"><GraduationCap className="h-4 w-4" /> {ed.school}</h4>
                    <span className="text-sm text-muted-foreground">{ed.period}</span>
                  </div>
                  <p className="text-sm text-muted-foreground">{ed.program}</p>
                </div>
              ))}
            </CardContent>
          </Card>
        </div>
      </Section>

      {/* Contact */}
      <Section id="contact" icon={Mail} title="Contact" description="Prefer email · open to internships, freelance, and collabs.">
        <div className="grid md:grid-cols-3 gap-6 items-start">
          <Card className="md:col-span-2">
            <CardHeader>
              <CardTitle>Let’s talk</CardTitle>
              <CardDescription>Send an email and I’ll reply shortly.</CardDescription>
            </CardHeader>
            <CardContent>
              <div className="grid sm:grid-cols-2 gap-3">
                <Input placeholder="Your name" />
                <Input placeholder="Your email" />
                <Input className="sm:col-span-2" placeholder="Subject" />
                <textarea className="sm:col-span-2 w-full min-h-[120px] rounded-md border bg-background p-2 text-sm" placeholder="Message" />
                <Button className="sm:col-span-2" size="lg">
                  <Mail className="h-4 w-4 mr-2" /> Email me
                </Button>
              </div>
            </CardContent>
          </Card>
          <div className="space-y-4">
            <Card>
              <CardHeader>
                <CardTitle>Links</CardTitle>
              </CardHeader>
              <CardContent className="space-y-3 text-sm">
                <LinkIcon href={`mailto:${profile.email}`} label={profile.email} icon={Mail} />
                <LinkIcon href={profile.github} label="GitHub" icon={Github} />
                <LinkIcon href={profile.linkedin} label="LinkedIn" icon={Linkedin} />
                <LinkIcon href={profile.website} label="Website" icon={Globe} />
                <LinkIcon href="https://youtube.com/@yourhandle" label="YouTube" icon={Youtube} />
              </CardContent>
            </Card>
            <Card>
              <CardHeader>
                <CardTitle>Résumé</CardTitle>
                <CardDescription>One page · PDF</CardDescription>
              </CardHeader>
              <CardContent>
                <Button asChild variant="secondary" className="w-full">
                  <a href="/resume.pdf" target="_blank" rel="noreferrer">Download</a>
                </Button>
              </CardContent>
            </Card>
          </div>
        </div>
      </Section>

      {/* Footer */}
      <footer className="border-t py-10 mt-8">
        <div className="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col sm:flex-row items-center justify-between gap-4 text-sm text-muted-foreground">
          <div className="flex items-center gap-2">
            <Sparkles className="h-4 w-4" /> Built with React, Tailwind, and shadcn/ui
          </div>
          <div className="flex items-center gap-3">
            <a className="hover:underline" href="#">Back to top</a>
            <span>© {new Date().getFullYear()} {profile.name}</span>
          </div>
        </div>
      </footer>
    </div>
  );
}
